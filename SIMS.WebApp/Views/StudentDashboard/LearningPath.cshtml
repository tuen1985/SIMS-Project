@using SIMS.Domain
@model IEnumerable<SIMS.Domain.Enrollment>
@{
    ViewData["Title"] = "Learning Path";
}

<h1>@ViewData["Title"]</h1>
<p>This is the list of classes you have been enrolled in.</p>
<table class="table">
    <thead>
        <tr><th>Class Name</th><th>Course</th><th>Faculty</th><th>Status</th></tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                @* ADD NULL CHECKS (?.) TO PREVENT ERRORS *@
                <td>@item.Classroom?.ClassName</td>
                <td>@item.Classroom?.Course?.CourseName</td>
                <td>@item.Classroom?.Faculty?.FullName</td>
                <td>
                    @{
                        var today = DateTime.Today;
                        if (item.Grade != null && item.Grade.Score.HasValue)
                        {
                            <span class="badge badge-success">Completed</span>
                        }
                        else if (item.Classroom != null)
                        {
                            if (today < item.Classroom.StartDate)
                            {
                                <span class="badge badge-secondary">Upcoming</span>
                            }
                            else
                            {
                                <span class="badge badge-primary">In Progress</span>
                            }
                        }
                    }
                </td>
            </tr>
        }
    </tbody>
</table>